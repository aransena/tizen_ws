/*******************************************************************************
* This file was generated by UI Builder.
* User should hand edit this file.
********************************************************************************/

#define PORT 1153
#define SERVICE_PORT	21234	/* hard-coded port number */
#define BUFSIZE 2048

#include "app_main.h"
#include "uib_views.h"
#include <string.h>
#include <netdb.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define BUFLEN 2048
#define MSGS 5	/* number of messages to send */

typedef struct _uib_view1_control_context {
 /* add your variables here */

} uib_view1_control_context;

void view1_startButton_onclicked(uib_view1_view_context *vc, Evas_Object *obj, void *event_info) {
	dlog_print(DLOG_DEBUG, LOG_TAG, "Start Button Pressed");
	 GError *err = nullptr;
	    GInetAddress *iaddr = g_inet_address_new_any(G_SOCKET_FAMILY_IPV4);
	    GSocketAddress *addr = g_inet_socket_address_new(iaddr, 7070);
	    GSocket *sock = g_socket_new(G_SOCKET_FAMILY_IPV4, G_SOCKET_TYPE_DATAGRAM, G_SOCKET_PROTOCOL_UDP, &err);
	    if (err)
	        WERROR("ERR1");
	    g_socket_set_broadcast(sock, TRUE);
	    g_socket_send_to(sock, addr, "TEST", 5, nullptr, &err);
	    if (err)
	        WERROR("ERR2");
	    WDEBUG("SENT!");

}

void view1_stopButton_onclicked(uib_view1_view_context *vc, Evas_Object *obj, void *event_info) {
	dlog_print(DLOG_DEBUG, LOG_TAG, "Stop Button Pressed");
}

